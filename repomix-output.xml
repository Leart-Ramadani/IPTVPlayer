This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.gitignore
App.js
app.json
assets/images/android-icon-background.png
assets/images/android-icon-foreground.png
assets/images/android-icon-monochrome.png
assets/images/favicon.png
assets/images/icon.png
assets/images/partial-react-logo.png
assets/images/react-logo.png
assets/images/react-logo@2x.png
assets/images/react-logo@3x.png
assets/images/splash-icon.png
index.js
package.json
README.md
src/api/xtreamAPI.js
src/screens/HomeScreen.jsx
src/screens/LiveTVScreen.jsx
src/screens/LoginScreen.jsx
src/screens/MoviesScreen.jsx
src/screens/PlayerScreen.jsx
src/screens/SeriesScreen.jsx
src/screens/SplashScreen.jsx
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".gitignore">
# Learn more https://docs.github.com/en/get-started/getting-started-with-git/ignoring-files

# dependencies
node_modules/

# Expo
.expo/
dist/
web-build/
expo-env.d.ts

# Native
.kotlin/
*.orig.*
*.jks
*.p8
*.p12
*.key
*.mobileprovision

# Metro
.metro-health-check*

# debug
npm-debug.*
yarn-debug.*
yarn-error.*

# macOS
.DS_Store
*.pem

# local env files
.env*.local

# typescript
*.tsbuildinfo

app-example

# generated native folders
/ios
/android
</file>

<file path="App.js">
// App.js
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createStackNavigator } from '@react-navigation/stack';
import { StatusBar } from 'react-native';

// Import screens
import SplashScreen from './src/screens/SplashScreen';
import LoginScreen from './src/screens/LoginScreen';
import HomeScreen from './src/screens/HomeScreen';
import LiveTVScreen from './src/screens/LiveTVScreen';
import MoviesScreen from './src/screens/MoviesScreen';
import SeriesScreen from './src/screens/SeriesScreen';
import PlayerScreen from './src/screens/PlayerScreen';

const Stack = createStackNavigator();

export default function App() {
    return (
        <>
            <StatusBar barStyle="light-content" backgroundColor="#09090b" />
            <NavigationContainer>
                <Stack.Navigator
                    initialRouteName="Splash"
                    screenOptions={{
                        headerStyle: {
                            backgroundColor: '#09090b',
                            elevation: 0,
                            shadowOpacity: 0,
                            borderBottomWidth: 1,
                            borderBottomColor: '#27272a',
                        },
                        headerTintColor: '#ffffff',
                        headerTitleStyle: {
                            fontWeight: '600',
                            fontSize: 18,
                        },
                        cardStyle: { backgroundColor: '#09090b' },
                    }}
                >
                    <Stack.Screen
                        name="Splash"
                        component={SplashScreen}
                        options={{ headerShown: false }}
                    />
                    <Stack.Screen
                        name="Login"
                        component={LoginScreen}
                        options={{ headerShown: false }}
                    />
                    <Stack.Screen
                        name="Home"
                        component={HomeScreen}
                        options={{ headerShown: false }}
                    />
                    <Stack.Screen
                        name="LiveTV"
                        component={LiveTVScreen}
                        options={{ title: 'Live TV' }}
                    />
                    <Stack.Screen
                        name="Movies"
                        component={MoviesScreen}
                        options={{ title: 'Movies' }}
                    />
                    <Stack.Screen
                        name="Series"
                        component={SeriesScreen}
                        options={{ title: 'TV Series' }}
                    />
                    <Stack.Screen
                        name="Player"
                        component={PlayerScreen}
                        options={{ headerShown: false }}
                    />
                </Stack.Navigator>
            </NavigationContainer>
        </>
    );
}
</file>

<file path="index.js">
import { registerRootComponent } from "expo";

import App from "./App";

registerRootComponent(App);
</file>

<file path="README.md">
# Welcome to your Expo app üëã

This is an [Expo](https://expo.dev) project created with [`create-expo-app`](https://www.npmjs.com/package/create-expo-app).

## Get started

1. Install dependencies

   ```bash
   npm install
   ```

2. Start the app

   ```bash
   npx expo start
   ```

In the output, you'll find options to open the app in a

- [development build](https://docs.expo.dev/develop/development-builds/introduction/)
- [Android emulator](https://docs.expo.dev/workflow/android-studio-emulator/)
- [iOS simulator](https://docs.expo.dev/workflow/ios-simulator/)
- [Expo Go](https://expo.dev/go), a limited sandbox for trying out app development with Expo

You can start developing by editing the files inside the **app** directory. This project uses [file-based routing](https://docs.expo.dev/router/introduction).

## Get a fresh project

When you're ready, run:

```bash
npm run reset-project
```

This command will move the starter code to the **app-example** directory and create a blank **app** directory where you can start developing.

## Learn more

To learn more about developing your project with Expo, look at the following resources:

- [Expo documentation](https://docs.expo.dev/): Learn fundamentals, or go into advanced topics with our [guides](https://docs.expo.dev/guides).
- [Learn Expo tutorial](https://docs.expo.dev/tutorial/introduction/): Follow a step-by-step tutorial where you'll create a project that runs on Android, iOS, and the web.

## Join the community

Join our community of developers creating universal apps.

- [Expo on GitHub](https://github.com/expo/expo): View our open source platform and contribute.
- [Discord community](https://chat.expo.dev): Chat with Expo users and ask questions.
</file>

<file path="src/api/xtreamAPI.js">
// src/api/xtreamAPI.js
import axios from 'axios';

/**
 * Xtream Codes API Integration
 * Documentation: Standard Xtream Codes API endpoints
 */

class XtreamAPI {
    constructor(serverUrl, username, password) {
        this.serverUrl = serverUrl.replace(/\/$/, ''); // Remove trailing slash
        this.username = username;
        this.password = password;
        this.baseUrl = `${this.serverUrl}/player_api.php`;
    }

    // Build API URL with credentials
    buildUrl(action = null, params = {}) {
        let url = `${this.baseUrl}?username=${this.username}&password=${this.password}`;

        if (action) {
            url += `&action=${action}`;
        }

        Object.keys(params).forEach(key => {
            url += `&${key}=${params[key]}`;
        });

        return url;
    }

    // Authenticate user and get account info
    async authenticate() {
        try {
            const url = this.buildUrl();
            const response = await axios.get(url, { timeout: 10000 });
            return response.data;
        } catch (error) {
            console.error('Authentication error:', error);
            throw error;
        }
    }

    // Get live TV categories
    async getLiveCategories() {
        try {
            const url = this.buildUrl('get_live_categories');
            const response = await axios.get(url, { timeout: 10000 });
            return response.data;
        } catch (error) {
            console.error('Error fetching live categories:', error);
            throw error;
        }
    }

    // Get live TV streams
    async getLiveStreams(categoryId = null) {
        try {
            const params = categoryId ? { category_id: categoryId } : {};
            const url = this.buildUrl('get_live_streams', params);
            const response = await axios.get(url, { timeout: 15000 });
            return response.data;
        } catch (error) {
            console.error('Error fetching live streams:', error);
            throw error;
        }
    }

    // Get VOD categories
    async getVODCategories() {
        try {
            const url = this.buildUrl('get_vod_categories');
            const response = await axios.get(url, { timeout: 10000 });
            return response.data;
        } catch (error) {
            console.error('Error fetching VOD categories:', error);
            throw error;
        }
    }

    // Get VOD streams (movies)
    async getVODStreams(categoryId = null) {
        try {
            const params = categoryId ? { category_id: categoryId } : {};
            const url = this.buildUrl('get_vod_streams', params);
            const response = await axios.get(url, { timeout: 15000 });
            return response.data;
        } catch (error) {
            console.error('Error fetching VOD streams:', error);
            throw error;
        }
    }

    // Get VOD info (movie details)
    async getVODInfo(vodId) {
        try {
            const url = this.buildUrl('get_vod_info', { vod_id: vodId });
            const response = await axios.get(url, { timeout: 10000 });
            return response.data;
        } catch (error) {
            console.error('Error fetching VOD info:', error);
            throw error;
        }
    }

    // Get series categories
    async getSeriesCategories() {
        try {
            const url = this.buildUrl('get_series_categories');
            const response = await axios.get(url, { timeout: 10000 });
            return response.data;
        } catch (error) {
            console.error('Error fetching series categories:', error);
            throw error;
        }
    }

    // Get series
    async getSeries(categoryId = null) {
        try {
            const params = categoryId ? { category_id: categoryId } : {};
            const url = this.buildUrl('get_series', params);
            const response = await axios.get(url, { timeout: 15000 });
            return response.data;
        } catch (error) {
            console.error('Error fetching series:', error);
            throw error;
        }
    }

    // Get series info (with seasons and episodes)
    async getSeriesInfo(seriesId) {
        try {
            const url = this.buildUrl('get_series_info', { series_id: seriesId });
            const response = await axios.get(url, { timeout: 10000 });
            return response.data;
        } catch (error) {
            console.error('Error fetching series info:', error);
            throw error;
        }
    }

    // Get EPG (Electronic Program Guide)
    async getEPG(streamId, limit = 100) {
        try {
            const url = this.buildUrl('get_simple_data_table', {
                stream_id: streamId,
                limit: limit
            });
            const response = await axios.get(url, { timeout: 10000 });
            return response.data;
        } catch (error) {
            console.error('Error fetching EPG:', error);
            throw error;
        }
    }

    // Build stream URL for live TV
    getLiveStreamUrl(streamId, extension = 'm3u8') {
        return `${this.serverUrl}/live/${this.username}/${this.password}/${streamId}.${extension}`;
    }

    // Build stream URL for VOD (movies)
    getVODStreamUrl(streamId, containerExtension = 'mp4') {
        return `${this.serverUrl}/movie/${this.username}/${this.password}/${streamId}.${containerExtension}`;
    }

    // Build stream URL for series episodes
    getSeriesStreamUrl(streamId, containerExtension = 'mp4') {
        return `${this.serverUrl}/series/${this.username}/${this.password}/${streamId}.${containerExtension}`;
    }
}

// Helper function to authenticate user (used in LoginScreen)
export const authenticateUser = async (serverUrl, username, password) => {
    const api = new XtreamAPI(serverUrl, username, password);
    return await api.authenticate();
};

// Helper function to create API instance from saved credentials
export const createAPIInstance = async () => {
    try {
        const AsyncStorage = require('@react-native-async-storage/async-storage').default;
        const savedCreds = await AsyncStorage.getItem('iptv_credentials');

        if (savedCreds) {
            const { serverUrl, username, password } = JSON.parse(savedCreds);
            return new XtreamAPI(serverUrl, username, password);
        }

        throw new Error('No saved credentials found');
    } catch (error) {
        console.error('Error creating API instance:', error);
        throw error;
    }
};

export default XtreamAPI;
</file>

<file path="src/screens/HomeScreen.jsx">
// src/screens/HomeScreen.js
import React, { useState, useEffect } from 'react';
import {
    View,
    Text,
    TouchableOpacity,
    StyleSheet,
    SafeAreaView,
    Alert,
    ScrollView,
} from 'react-native';
import AsyncStorage from '@react-native-async-storage/async-storage';

const HomeScreen = ({ navigation }) => {
    const [userInfo, setUserInfo] = useState(null);
    const [playlistName, setPlaylistName] = useState('IPTV Player');

    useEffect(() => {
        loadUserInfo();
    }, []);

    const loadUserInfo = async () => {
        try {
            const credentials = await AsyncStorage.getItem('iptv_credentials');
            const user = await AsyncStorage.getItem('iptv_user_info');

            if (credentials) {
                const creds = JSON.parse(credentials);
                setPlaylistName(creds.playlistName || 'IPTV Player');
            }

            if (user) {
                setUserInfo(JSON.parse(user));
            }
        } catch (error) {
            console.error('Error loading user info:', error);
        }
    };

    const handleLogout = () => {
        Alert.alert(
            'Logout',
            'Are you sure you want to logout?',
            [
                { text: 'Cancel', style: 'cancel' },
                {
                    text: 'Logout',
                    style: 'destructive',
                    onPress: async () => {
                        await AsyncStorage.removeItem('iptv_credentials');
                        await AsyncStorage.removeItem('iptv_user_info');
                        await AsyncStorage.removeItem('iptv_server_info');
                        navigation.replace('Login');
                    },
                },
            ]
        );
    };

    const menuItems = [
        {
            id: 'live',
            title: 'Live TV',
            icon: 'üì°',
            description: 'Watch live television channels',
            screen: 'LiveTV',
            color: '#2563eb',
        },
        {
            id: 'movies',
            title: 'Movies',
            icon: 'üé¨',
            description: 'Browse video on demand',
            screen: 'Movies',
            color: '#dc2626',
        },
        {
            id: 'series',
            title: 'TV Series',
            icon: 'üì∫',
            description: 'Watch TV shows and series',
            screen: 'Series',
            color: '#16a34a',
        },
    ];

    return (
        <SafeAreaView style={styles.container}>
            {/* Header */}
            <View style={styles.header}>
                <View>
                    <Text style={styles.headerTitle}>{playlistName}</Text>
                    {userInfo && (
                        <Text style={styles.headerSubtitle}>
                            Welcome, {userInfo.username}
                        </Text>
                    )}
                </View>
                <TouchableOpacity onPress={handleLogout} style={styles.logoutButton}>
                    <Text style={styles.logoutButtonText}>Logout</Text>
                </TouchableOpacity>
            </View>

            <ScrollView style={styles.content} showsVerticalScrollIndicator={false}>
                {/* Account Info Card */}
                {userInfo && (
                    <View style={styles.accountCard}>
                        <Text style={styles.accountCardTitle}>Account Status</Text>
                        <View style={styles.accountInfo}>
                            <View style={styles.accountInfoItem}>
                                <Text style={styles.accountInfoLabel}>Status</Text>
                                <View style={[styles.statusBadge, styles.statusActive]}>
                                    <Text style={styles.statusText}>Active</Text>
                                </View>
                            </View>
                            <View style={styles.accountInfoItem}>
                                <Text style={styles.accountInfoLabel}>Max Connections</Text>
                                <Text style={styles.accountInfoValue}>
                                    {userInfo.max_connections || 'N/A'}
                                </Text>
                            </View>
                            {userInfo.exp_date && (
                                <View style={styles.accountInfoItem}>
                                    <Text style={styles.accountInfoLabel}>Expires</Text>
                                    <Text style={styles.accountInfoValue}>
                                        {new Date(parseInt(userInfo.exp_date) * 1000).toLocaleDateString()}
                                    </Text>
                                </View>
                            )}
                        </View>
                    </View>
                )}

                {/* Menu Items */}
                <View style={styles.menuContainer}>
                    <Text style={styles.sectionTitle}>Browse Content</Text>
                    {menuItems.map((item) => (
                        <TouchableOpacity
                            key={item.id}
                            style={styles.menuItem}
                            onPress={() => navigation.navigate(item.screen)}
                            activeOpacity={0.7}
                        >
                            <View style={styles.menuItemLeft}>
                                <View style={[styles.menuIcon, { backgroundColor: item.color }]}>
                                    <Text style={styles.menuIconText}>{item.icon}</Text>
                                </View>
                                <View style={styles.menuTextContainer}>
                                    <Text style={styles.menuItemTitle}>{item.title}</Text>
                                    <Text style={styles.menuItemDescription}>
                                        {item.description}
                                    </Text>
                                </View>
                            </View>
                            <Text style={styles.menuArrow}>‚Ä∫</Text>
                        </TouchableOpacity>
                    ))}
                </View>

                {/* Info Section */}
                <View style={styles.infoSection}>
                    <Text style={styles.infoTitle}>About</Text>
                    <Text style={styles.infoText}>
                        This IPTV player allows you to watch live TV, movies, and series from your IPTV provider.
                        Make sure you have a stable internet connection for the best streaming experience.
                    </Text>
                </View>
            </ScrollView>
        </SafeAreaView>
    );
};

const styles = StyleSheet.create({
    container: {
        flex: 1,
        backgroundColor: '#09090b',
    },
    header: {
        flexDirection: 'row',
        justifyContent: 'space-between',
        alignItems: 'center',
        padding: 16,
        borderBottomWidth: 1,
        borderBottomColor: '#27272a',
    },
    headerTitle: {
        fontSize: 24,
        fontWeight: 'bold',
        color: '#ffffff',
    },
    headerSubtitle: {
        fontSize: 14,
        color: '#71717a',
        marginTop: 2,
    },
    logoutButton: {
        paddingHorizontal: 16,
        paddingVertical: 8,
    },
    logoutButtonText: {
        color: '#71717a',
        fontSize: 14,
        fontWeight: '500',
    },
    content: {
        flex: 1,
        padding: 16,
    },
    accountCard: {
        backgroundColor: '#18181b',
        borderRadius: 12,
        borderWidth: 1,
        borderColor: '#27272a',
        padding: 16,
        marginBottom: 24,
    },
    accountCardTitle: {
        fontSize: 16,
        fontWeight: '600',
        color: '#ffffff',
        marginBottom: 16,
    },
    accountInfo: {
        gap: 12,
    },
    accountInfoItem: {
        flexDirection: 'row',
        justifyContent: 'space-between',
        alignItems: 'center',
    },
    accountInfoLabel: {
        fontSize: 14,
        color: '#a1a1aa',
    },
    accountInfoValue: {
        fontSize: 14,
        color: '#ffffff',
        fontWeight: '500',
    },
    statusBadge: {
        paddingHorizontal: 10,
        paddingVertical: 4,
        borderRadius: 6,
    },
    statusActive: {
        backgroundColor: 'rgba(34, 197, 94, 0.1)',
    },
    statusText: {
        fontSize: 12,
        fontWeight: '600',
        color: '#22c55e',
    },
    menuContainer: {
        marginBottom: 24,
    },
    sectionTitle: {
        fontSize: 18,
        fontWeight: '600',
        color: '#ffffff',
        marginBottom: 16,
    },
    menuItem: {
        flexDirection: 'row',
        alignItems: 'center',
        justifyContent: 'space-between',
        backgroundColor: '#18181b',
        borderRadius: 12,
        borderWidth: 1,
        borderColor: '#27272a',
        padding: 16,
        marginBottom: 12,
    },
    menuItemLeft: {
        flexDirection: 'row',
        alignItems: 'center',
        flex: 1,
    },
    menuIcon: {
        width: 48,
        height: 48,
        borderRadius: 10,
        alignItems: 'center',
        justifyContent: 'center',
        marginRight: 16,
    },
    menuIconText: {
        fontSize: 24,
    },
    menuTextContainer: {
        flex: 1,
    },
    menuItemTitle: {
        fontSize: 16,
        fontWeight: '600',
        color: '#ffffff',
        marginBottom: 4,
    },
    menuItemDescription: {
        fontSize: 14,
        color: '#71717a',
    },
    menuArrow: {
        fontSize: 28,
        color: '#3f3f46',
        fontWeight: '300',
    },
    infoSection: {
        backgroundColor: '#18181b',
        borderRadius: 12,
        borderWidth: 1,
        borderColor: '#27272a',
        padding: 16,
        marginBottom: 24,
    },
    infoTitle: {
        fontSize: 16,
        fontWeight: '600',
        color: '#ffffff',
        marginBottom: 8,
    },
    infoText: {
        fontSize: 14,
        color: '#a1a1aa',
        lineHeight: 20,
    },
});

export default HomeScreen;
</file>

<file path="src/screens/LiveTVScreen.jsx">
// src/screens/LiveTVScreen.js
import React, { useState, useEffect } from 'react';
import {
    View,
    Text,
    FlatList,
    TouchableOpacity,
    StyleSheet,
    ActivityIndicator,
    Image,
    Alert,
    RefreshControl,
} from 'react-native';
import { createAPIInstance } from '../api/xtreamAPI';

const LiveTVScreen = ({ navigation }) => {
    const [channels, setChannels] = useState([]);
    const [categories, setCategories] = useState([]);
    const [selectedCategory, setSelectedCategory] = useState(null);
    const [isLoading, setIsLoading] = useState(true);
    const [isRefreshing, setIsRefreshing] = useState(false);

    useEffect(() => {
        loadChannels();
    }, [selectedCategory]);

    const loadChannels = async () => {
        try {
            setIsLoading(true);
            const api = await createAPIInstance();

            // Load categories if not already loaded
            if (categories.length === 0) {
                const cats = await api.getLiveCategories();
                setCategories([{ category_id: null, category_name: 'All Channels' }, ...cats]);
            }

            // Load channels
            const streams = await api.getLiveStreams(selectedCategory);
            setChannels(streams);
            setIsLoading(false);
        } catch (error) {
            setIsLoading(false);
            Alert.alert('Error', 'Failed to load channels. Please try again.');
            console.error('Error loading channels:', error);
        }
    };

    const handleRefresh = async () => {
        setIsRefreshing(true);
        await loadChannels();
        setIsRefreshing(false);
    };

    const handleChannelPress = async (channel) => {
        try {
            const api = await createAPIInstance();
            const streamUrl = api.getLiveStreamUrl(channel.stream_id, 'm3u8');

            navigation.navigate('Player', {
                streamUrl: streamUrl,
                title: channel.name,
                type: 'live',
            });
        } catch (error) {
            Alert.alert('Error', 'Failed to play channel');
            console.error('Error playing channel:', error);
        }
    };

    const renderChannel = ({ item }) => (
        <TouchableOpacity
            style={styles.channelItem}
            onPress={() => handleChannelPress(item)}
            activeOpacity={0.7}
        >
            <View style={styles.channelIconContainer}>
                {item.stream_icon ? (
                    <Image
                        source={{ uri: item.stream_icon }}
                        style={styles.channelIcon}
                    />
                ) : (
                    <View style={[styles.channelIcon, styles.placeholderIcon]}>
                        <Text style={styles.placeholderText}>üì∫</Text>
                    </View>
                )}
            </View>
            <View style={styles.channelInfo}>
                <Text style={styles.channelName} numberOfLines={1}>
                    {item.name}
                </Text>
                {item.category_name && (
                    <Text style={styles.channelCategory} numberOfLines={1}>
                        {item.category_name}
                    </Text>
                )}
            </View>
            <View style={styles.playButton}>
                <Text style={styles.playIcon}>‚ñ∂</Text>
            </View>
        </TouchableOpacity>
    );

    const renderCategory = ({ item }) => (
        <TouchableOpacity
            style={[
                styles.categoryChip,
                selectedCategory === item.category_id && styles.categoryChipActive,
            ]}
            onPress={() => setSelectedCategory(item.category_id)}
        >
            <Text
                style={[
                    styles.categoryText,
                    selectedCategory === item.category_id && styles.categoryTextActive,
                ]}
            >
                {item.category_name}
            </Text>
        </TouchableOpacity>
    );

    if (isLoading && channels.length === 0) {
        return (
            <View style={styles.loadingContainer}>
                <ActivityIndicator size="large" color="#2563eb" />
                <Text style={styles.loadingText}>Loading channels...</Text>
            </View>
        );
    }

    return (
        <View style={styles.container}>
            {/* Categories */}
            {categories.length > 0 && (
                <View style={styles.categoriesContainer}>
                    <FlatList
                        horizontal
                        data={categories}
                        renderItem={renderCategory}
                        keyExtractor={(item) => item.category_id?.toString() || 'all'}
                        showsHorizontalScrollIndicator={false}
                        contentContainerStyle={styles.categoriesList}
                    />
                </View>
            )}

            {/* Channels List */}
            <FlatList
                data={channels}
                renderItem={renderChannel}
                keyExtractor={(item) => item.stream_id.toString()}
                contentContainerStyle={styles.channelsList}
                refreshControl={
                    <RefreshControl
                        refreshing={isRefreshing}
                        onRefresh={handleRefresh}
                        tintColor="#2563eb"
                    />
                }
                ListEmptyComponent={
                    <View style={styles.emptyContainer}>
                        <Text style={styles.emptyText}>No channels available</Text>
                    </View>
                }
            />
        </View>
    );
};

const styles = StyleSheet.create({
    container: {
        flex: 1,
        backgroundColor: '#09090b',
    },
    loadingContainer: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'center',
        backgroundColor: '#09090b',
    },
    loadingText: {
        color: '#71717a',
        marginTop: 12,
        fontSize: 14,
    },
    categoriesContainer: {
        borderBottomWidth: 1,
        borderBottomColor: '#27272a',
        backgroundColor: '#09090b',
    },
    categoriesList: {
        paddingHorizontal: 12,
        paddingVertical: 12,
    },
    categoryChip: {
        paddingHorizontal: 16,
        paddingVertical: 8,
        borderRadius: 20,
        backgroundColor: '#18181b',
        borderWidth: 1,
        borderColor: '#27272a',
        marginRight: 8,
    },
    categoryChipActive: {
        backgroundColor: '#2563eb',
        borderColor: '#2563eb',
    },
    categoryText: {
        color: '#a1a1aa',
        fontSize: 14,
        fontWeight: '500',
    },
    categoryTextActive: {
        color: '#ffffff',
    },
    channelsList: {
        padding: 8,
    },
    channelItem: {
        flexDirection: 'row',
        alignItems: 'center',
        backgroundColor: '#18181b',
        borderRadius: 12,
        borderWidth: 1,
        borderColor: '#27272a',
        padding: 12,
        marginBottom: 8,
    },
    channelIconContainer: {
        marginRight: 12,
    },
    channelIcon: {
        width: 48,
        height: 48,
        borderRadius: 8,
    },
    placeholderIcon: {
        backgroundColor: '#27272a',
        justifyContent: 'center',
        alignItems: 'center',
    },
    placeholderText: {
        fontSize: 24,
    },
    channelInfo: {
        flex: 1,
    },
    channelName: {
        fontSize: 15,
        fontWeight: '600',
        color: '#ffffff',
        marginBottom: 4,
    },
    channelCategory: {
        fontSize: 13,
        color: '#71717a',
    },
    playButton: {
        width: 36,
        height: 36,
        borderRadius: 18,
        backgroundColor: '#2563eb',
        justifyContent: 'center',
        alignItems: 'center',
    },
    playIcon: {
        color: '#ffffff',
        fontSize: 14,
        marginLeft: 2,
    },
    emptyContainer: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'center',
        paddingVertical: 48,
    },
    emptyText: {
        color: '#71717a',
        fontSize: 16,
    },
});

export default LiveTVScreen;
</file>

<file path="src/screens/LoginScreen.jsx">
// src/screens/LoginScreen.js
import React, { useState, useEffect } from 'react';
import {
    View,
    Text,
    TextInput,
    TouchableOpacity,
    StyleSheet,
    ActivityIndicator,
    Alert,
    KeyboardAvoidingView,
    Platform,
    ScrollView,
} from 'react-native';
import AsyncStorage from '@react-native-async-storage/async-storage';
import { authenticateUser } from '../api/xtreamAPI';

const LoginScreen = ({ navigation }) => {
    const [credentials, setCredentials] = useState({
        playlistName: '',
        serverUrl: '',
        username: '',
        password: '',
    });
    const [isLoading, setIsLoading] = useState(false);
    const [isSaving, setIsSaving] = useState(false);

    useEffect(() => {
        checkSavedCredentials();
    }, []);

    const checkSavedCredentials = async () => {
        try {
            const savedCreds = await AsyncStorage.getItem('iptv_credentials');
            if (savedCreds) {
                const parsed = JSON.parse(savedCreds);
                setCredentials(parsed);
            }
        } catch (error) {
            console.log('Error loading saved credentials:', error);
        }
    };

    const handleInputChange = (field, value) => {
        setCredentials(prev => ({
            ...prev,
            [field]: value,
        }));
    };

    const validateInputs = () => {
        if (!credentials.serverUrl.trim()) {
            Alert.alert('Error', 'Please enter Server URL');
            return false;
        }
        if (!credentials.username.trim()) {
            Alert.alert('Error', 'Please enter Username');
            return false;
        }
        if (!credentials.password.trim()) {
            Alert.alert('Error', 'Please enter Password');
            return false;
        }
        return true;
    };

    const handleLogin = async () => {
        if (!validateInputs()) return;

        setIsLoading(true);

        try {
            // Authenticate with Xtream Codes API
            const response = await authenticateUser(
                credentials.serverUrl,
                credentials.username,
                credentials.password
            );

            if (response.user_info && response.user_info.auth === 1) {
                // Save credentials
                await AsyncStorage.setItem('iptv_credentials', JSON.stringify(credentials));
                await AsyncStorage.setItem('iptv_user_info', JSON.stringify(response.user_info));
                await AsyncStorage.setItem('iptv_server_info', JSON.stringify(response.server_info));

                setIsLoading(false);
                navigation.replace('Home');
            } else {
                setIsLoading(false);
                Alert.alert('Login Failed', 'Invalid credentials or server URL');
            }
        } catch (error) {
            setIsLoading(false);
            Alert.alert('Connection Error', 'Failed to connect to IPTV server. Please check your server URL and try again.');
            console.error('Login error:', error);
        }
    };

    return (
        <KeyboardAvoidingView
            style={styles.container}
            behavior={Platform.OS === 'ios' ? 'padding' : 'height'}
        >
            <ScrollView
                contentContainerStyle={styles.scrollContent}
                keyboardShouldPersistTaps="handled"
            >
                <View style={styles.content}>
                    {/* Header */}
                    <View style={styles.header}>
                        <View style={styles.iconContainer}>
                            <Text style={styles.iconText}>üì∫</Text>
                        </View>
                        <Text style={styles.title}>IPTV Player</Text>
                        <Text style={styles.subtitle}>Enter your credentials to continue</Text>
                    </View>

                    {/* Login Form */}
                    <View style={styles.formContainer}>
                        <View style={styles.inputGroup}>
                            <Text style={styles.label}>
                                Playlist Name
                                <Text style={styles.optional}> (Optional)</Text>
                            </Text>
                            <TextInput
                                style={styles.input}
                                value={credentials.playlistName}
                                onChangeText={(text) => handleInputChange('playlistName', text)}
                                placeholder="My IPTV"
                                placeholderTextColor="#71717a"
                                autoCapitalize="none"
                            />
                        </View>

                        <View style={styles.inputGroup}>
                            <Text style={styles.label}>
                                Server URL
                                <Text style={styles.required}> *</Text>
                            </Text>
                            <TextInput
                                style={styles.input}
                                value={credentials.serverUrl}
                                onChangeText={(text) => handleInputChange('serverUrl', text)}
                                placeholder="http://example.com:8080"
                                placeholderTextColor="#71717a"
                                autoCapitalize="none"
                                keyboardType="url"
                            />
                        </View>

                        <View style={styles.inputGroup}>
                            <Text style={styles.label}>
                                Username
                                <Text style={styles.required}> *</Text>
                            </Text>
                            <TextInput
                                style={styles.input}
                                value={credentials.username}
                                onChangeText={(text) => handleInputChange('username', text)}
                                placeholder="Enter username"
                                placeholderTextColor="#71717a"
                                autoCapitalize="none"
                            />
                        </View>

                        <View style={styles.inputGroup}>
                            <Text style={styles.label}>
                                Password
                                <Text style={styles.required}> *</Text>
                            </Text>
                            <TextInput
                                style={styles.input}
                                value={credentials.password}
                                onChangeText={(text) => handleInputChange('password', text)}
                                placeholder="Enter password"
                                placeholderTextColor="#71717a"
                                secureTextEntry
                                autoCapitalize="none"
                            />
                        </View>

                        <TouchableOpacity
                            style={[styles.loginButton, isLoading && styles.loginButtonDisabled]}
                            onPress={handleLogin}
                            disabled={isLoading}
                        >
                            {isLoading ? (
                                <ActivityIndicator color="#ffffff" />
                            ) : (
                                <Text style={styles.loginButtonText}>Login</Text>
                            )}
                        </TouchableOpacity>

                        <Text style={styles.infoText}>
                            By logging in, you agree to use this service responsibly
                        </Text>
                    </View>

                    {/* Info Box */}
                    <View style={styles.infoBox}>
                        <Text style={styles.infoBoxText}>
                            <Text style={styles.infoBoxBold}>Note:</Text> Your IPTV provider will give you the Server URL, Username, and Password needed to access their content.
                        </Text>
                    </View>
                </View>
            </ScrollView>
        </KeyboardAvoidingView>
    );
};

const styles = StyleSheet.create({
    container: {
        flex: 1,
        backgroundColor: '#09090b',
    },
    scrollContent: {
        flexGrow: 1,
        justifyContent: 'center',
        padding: 16,
    },
    content: {
        width: '100%',
        maxWidth: 400,
        alignSelf: 'center',
    },
    header: {
        alignItems: 'center',
        marginBottom: 32,
    },
    iconContainer: {
        marginBottom: 8,
    },
    iconText: {
        fontSize: 40,
    },
    title: {
        fontSize: 28,
        fontWeight: 'bold',
        color: '#ffffff',
        marginBottom: 8,
    },
    subtitle: {
        fontSize: 14,
        color: '#71717a',
    },
    formContainer: {
        backgroundColor: '#18181b',
        borderRadius: 12,
        borderWidth: 1,
        borderColor: '#27272a',
        padding: 24,
    },
    inputGroup: {
        marginBottom: 16,
    },
    label: {
        fontSize: 14,
        fontWeight: '500',
        color: '#d4d4d8',
        marginBottom: 8,
    },
    optional: {
        color: '#52525b',
    },
    required: {
        color: '#ef4444',
    },
    input: {
        backgroundColor: '#27272a',
        borderWidth: 1,
        borderColor: '#3f3f46',
        borderRadius: 8,
        padding: 12,
        fontSize: 16,
        color: '#ffffff',
    },
    loginButton: {
        backgroundColor: '#2563eb',
        borderRadius: 8,
        padding: 14,
        alignItems: 'center',
        marginTop: 8,
    },
    loginButtonDisabled: {
        backgroundColor: '#3f3f46',
    },
    loginButtonText: {
        color: '#ffffff',
        fontSize: 16,
        fontWeight: '600',
    },
    infoText: {
        fontSize: 12,
        color: '#52525b',
        textAlign: 'center',
        marginTop: 16,
    },
    infoBox: {
        backgroundColor: 'rgba(24, 24, 27, 0.5)',
        borderWidth: 1,
        borderColor: '#27272a',
        borderRadius: 8,
        padding: 16,
        marginTop: 24,
    },
    infoBoxText: {
        fontSize: 12,
        color: '#71717a',
        lineHeight: 18,
    },
    infoBoxBold: {
        fontWeight: '600',
        color: '#a1a1aa',
    },
});

export default LoginScreen;
</file>

<file path="src/screens/MoviesScreen.jsx">
// src/screens/MoviesScreen.js
import React, { useState, useEffect } from 'react';
import {
    View,
    Text,
    FlatList,
    TouchableOpacity,
    StyleSheet,
    ActivityIndicator,
    Image,
    Alert,
    RefreshControl,
    Dimensions,
} from 'react-native';
import { createAPIInstance } from '../api/xtreamAPI';

const { width } = Dimensions.get('window');
const ITEM_WIDTH = (width - 48) / 3; // 3 columns with padding

const MoviesScreen = ({ navigation }) => {
    const [movies, setMovies] = useState([]);
    const [categories, setCategories] = useState([]);
    const [selectedCategory, setSelectedCategory] = useState(null);
    const [isLoading, setIsLoading] = useState(true);
    const [isRefreshing, setIsRefreshing] = useState(false);

    useEffect(() => {
        loadMovies();
    }, [selectedCategory]);

    const loadMovies = async () => {
        try {
            setIsLoading(true);
            const api = await createAPIInstance();

            // Load categories if not already loaded
            if (categories.length === 0) {
                const cats = await api.getVODCategories();
                setCategories([{ category_id: null, category_name: 'All Movies' }, ...cats]);
            }

            // Load movies
            const streams = await api.getVODStreams(selectedCategory);
            setMovies(streams);
            setIsLoading(false);
        } catch (error) {
            setIsLoading(false);
            Alert.alert('Error', 'Failed to load movies. Please try again.');
            console.error('Error loading movies:', error);
        }
    };

    const handleRefresh = async () => {
        setIsRefreshing(true);
        await loadMovies();
        setIsRefreshing(false);
    };

    const handleMoviePress = async (movie) => {
        try {
            const api = await createAPIInstance();
            const streamUrl = api.getVODStreamUrl(movie.stream_id, movie.container_extension || 'mp4');

            navigation.navigate('Player', {
                streamUrl: streamUrl,
                title: movie.name,
                type: 'vod',
            });
        } catch (error) {
            Alert.alert('Error', 'Failed to play movie');
            console.error('Error playing movie:', error);
        }
    };

    const renderMovie = ({ item }) => (
        <TouchableOpacity
            style={styles.movieItem}
            onPress={() => handleMoviePress(item)}
            activeOpacity={0.7}
        >
            <View style={styles.posterContainer}>
                {item.stream_icon ? (
                    <Image
                        source={{ uri: item.stream_icon }}
                        style={styles.poster}
                        resizeMode="cover"
                    />
                ) : (
                    <View style={[styles.poster, styles.placeholderPoster]}>
                        <Text style={styles.placeholderText}>üé¨</Text>
                    </View>
                )}
                <View style={styles.playOverlay}>
                    <View style={styles.playButton}>
                        <Text style={styles.playIcon}>‚ñ∂</Text>
                    </View>
                </View>
            </View>
            <Text style={styles.movieTitle} numberOfLines={2}>
                {item.name}
            </Text>
            {item.rating && (
                <Text style={styles.movieRating}>‚≠ê {item.rating}</Text>
            )}
        </TouchableOpacity>
    );

    const renderCategory = ({ item }) => (
        <TouchableOpacity
            style={[
                styles.categoryChip,
                selectedCategory === item.category_id && styles.categoryChipActive,
            ]}
            onPress={() => setSelectedCategory(item.category_id)}
        >
            <Text
                style={[
                    styles.categoryText,
                    selectedCategory === item.category_id && styles.categoryTextActive,
                ]}
            >
                {item.category_name}
            </Text>
        </TouchableOpacity>
    );

    if (isLoading && movies.length === 0) {
        return (
            <View style={styles.loadingContainer}>
                <ActivityIndicator size="large" color="#2563eb" />
                <Text style={styles.loadingText}>Loading movies...</Text>
            </View>
        );
    }

    return (
        <View style={styles.container}>
            {/* Categories */}
            {categories.length > 0 && (
                <View style={styles.categoriesContainer}>
                    <FlatList
                        horizontal
                        data={categories}
                        renderItem={renderCategory}
                        keyExtractor={(item) => item.category_id?.toString() || 'all'}
                        showsHorizontalScrollIndicator={false}
                        contentContainerStyle={styles.categoriesList}
                    />
                </View>
            )}

            {/* Movies Grid */}
            <FlatList
                data={movies}
                renderItem={renderMovie}
                keyExtractor={(item) => item.stream_id.toString()}
                numColumns={3}
                contentContainerStyle={styles.moviesList}
                columnWrapperStyle={styles.row}
                refreshControl={
                    <RefreshControl
                        refreshing={isRefreshing}
                        onRefresh={handleRefresh}
                        tintColor="#2563eb"
                    />
                }
                ListEmptyComponent={
                    <View style={styles.emptyContainer}>
                        <Text style={styles.emptyText}>No movies available</Text>
                    </View>
                }
            />
        </View>
    );
};

const styles = StyleSheet.create({
    container: {
        flex: 1,
        backgroundColor: '#09090b',
    },
    loadingContainer: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'center',
        backgroundColor: '#09090b',
    },
    loadingText: {
        color: '#71717a',
        marginTop: 12,
        fontSize: 14,
    },
    categoriesContainer: {
        borderBottomWidth: 1,
        borderBottomColor: '#27272a',
        backgroundColor: '#09090b',
    },
    categoriesList: {
        paddingHorizontal: 12,
        paddingVertical: 12,
    },
    categoryChip: {
        paddingHorizontal: 16,
        paddingVertical: 8,
        borderRadius: 20,
        backgroundColor: '#18181b',
        borderWidth: 1,
        borderColor: '#27272a',
        marginRight: 8,
    },
    categoryChipActive: {
        backgroundColor: '#2563eb',
        borderColor: '#2563eb',
    },
    categoryText: {
        color: '#a1a1aa',
        fontSize: 14,
        fontWeight: '500',
    },
    categoryTextActive: {
        color: '#ffffff',
    },
    moviesList: {
        padding: 8,
    },
    row: {
        justifyContent: 'space-between',
    },
    movieItem: {
        width: ITEM_WIDTH,
        marginBottom: 16,
        marginHorizontal: 4,
    },
    posterContainer: {
        position: 'relative',
        aspectRatio: 2 / 3,
        borderRadius: 8,
        overflow: 'hidden',
        marginBottom: 8,
    },
    poster: {
        width: '100%',
        height: '100%',
        backgroundColor: '#27272a',
    },
    placeholderPoster: {
        justifyContent: 'center',
        alignItems: 'center',
    },
    placeholderText: {
        fontSize: 32,
    },
    playOverlay: {
        position: 'absolute',
        top: 0,
        left: 0,
        right: 0,
        bottom: 0,
        backgroundColor: 'rgba(0, 0, 0, 0.4)',
        justifyContent: 'center',
        alignItems: 'center',
        opacity: 0,
    },
    playButton: {
        width: 44,
        height: 44,
        borderRadius: 22,
        backgroundColor: '#2563eb',
        justifyContent: 'center',
        alignItems: 'center',
    },
    playIcon: {
        color: '#ffffff',
        fontSize: 16,
        marginLeft: 2,
    },
    movieTitle: {
        fontSize: 13,
        fontWeight: '500',
        color: '#ffffff',
        marginBottom: 4,
        lineHeight: 16,
    },
    movieRating: {
        fontSize: 12,
        color: '#71717a',
    },
    emptyContainer: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'center',
        paddingVertical: 48,
        width: '100%',
    },
    emptyText: {
        color: '#71717a',
        fontSize: 16,
    },
});

export default MoviesScreen;
</file>

<file path="src/screens/PlayerScreen.jsx">
// src/screens/PlayerScreen.js
import React, { useState, useRef, useEffect } from 'react';
import {
    View,
    Text,
    TouchableOpacity,
    StyleSheet,
    ActivityIndicator,
    StatusBar,
    Dimensions,
    Alert,
} from 'react-native';
import Video from 'react-native-video';
import Orientation from 'react-native-orientation-locker';

const PlayerScreen = ({ route, navigation }) => {
    const { streamUrl, title, type } = route.params;
    const videoRef = useRef(null);

    const [isPlaying, setIsPlaying] = useState(true);
    const [isBuffering, setIsBuffering] = useState(false);
    const [showControls, setShowControls] = useState(true);
    const [currentTime, setCurrentTime] = useState(0);
    const [duration, setDuration] = useState(0);
    const [error, setError] = useState(null);

    const controlsTimeout = useRef(null);

    useEffect(() => {
        // Lock to landscape on mount
        Orientation.lockToLandscape();

        return () => {
            // Unlock orientation on unmount
            Orientation.unlockAllOrientations();
        };
    }, []);

    useEffect(() => {
        if (showControls) {
            resetControlsTimeout();
        }
    }, [showControls]);

    const resetControlsTimeout = () => {
        if (controlsTimeout.current) {
            clearTimeout(controlsTimeout.current);
        }
        controlsTimeout.current = setTimeout(() => {
            setShowControls(false);
        }, 5000);
    };

    const handleScreenPress = () => {
        setShowControls(!showControls);
        if (!showControls) {
            resetControlsTimeout();
        }
    };

    const handlePlayPause = () => {
        setIsPlaying(!isPlaying);
        resetControlsTimeout();
    };

    const handleBack = () => {
        navigation.goBack();
    };

    const handleBuffer = ({ isBuffering: buffering }) => {
        setIsBuffering(buffering);
    };

    const handleError = (error) => {
        console.error('Video error:', error);
        setError('Failed to load video stream');
        Alert.alert(
            'Playback Error',
            'Failed to play this stream. Please try again or select another stream.',
            [
                { text: 'OK', onPress: () => navigation.goBack() }
            ]
        );
    };

    const handleProgress = ({ currentTime, seekableDuration }) => {
        setCurrentTime(currentTime);
        setDuration(seekableDuration || duration);
    };

    const handleLoad = ({ duration }) => {
        setDuration(duration);
        setError(null);
    };

    const formatTime = (seconds) => {
        const hrs = Math.floor(seconds / 3600);
        const mins = Math.floor((seconds % 3600) / 60);
        const secs = Math.floor(seconds % 60);

        if (hrs > 0) {
            return `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }
        return `${mins}:${secs.toString().padStart(2, '0')}`;
    };

    return (
        <View style={styles.container}>
            <StatusBar hidden />

            {/* Video Player */}
            <Video
                ref={videoRef}
                source={{ uri: streamUrl }}
                style={styles.video}
                resizeMode="contain"
                paused={!isPlaying}
                onBuffer={handleBuffer}
                onError={handleError}
                onProgress={handleProgress}
                onLoad={handleLoad}
                bufferConfig={{
                    minBufferMs: 15000,
                    maxBufferMs: 50000,
                    bufferForPlaybackMs: 2500,
                    bufferForPlaybackAfterRebufferMs: 5000,
                }}
                repeat={false}
                playInBackground={false}
                playWhenInactive={false}
            />

            {/* Tap to show/hide controls */}
            <TouchableOpacity
                style={styles.overlay}
                activeOpacity={1}
                onPress={handleScreenPress}
            >
                {/* Buffering Indicator */}
                {isBuffering && (
                    <View style={styles.bufferingContainer}>
                        <ActivityIndicator size="large" color="#ffffff" />
                        <Text style={styles.bufferingText}>Buffering...</Text>
                    </View>
                )}

                {/* Error Message */}
                {error && (
                    <View style={styles.errorContainer}>
                        <Text style={styles.errorText}>‚ö†Ô∏è</Text>
                        <Text style={styles.errorMessage}>{error}</Text>
                    </View>
                )}

                {/* Controls */}
                {showControls && !error && (
                    <View style={styles.controlsContainer}>
                        {/* Top Bar */}
                        <View style={styles.topBar}>
                            <TouchableOpacity onPress={handleBack} style={styles.backButton}>
                                <Text style={styles.backIcon}>‚Üê</Text>
                            </TouchableOpacity>
                            <Text style={styles.title} numberOfLines={1}>
                                {title}
                            </Text>
                            <View style={styles.spacer} />
                        </View>

                        {/* Center Play/Pause */}
                        <View style={styles.centerControls}>
                            <TouchableOpacity
                                onPress={handlePlayPause}
                                style={styles.playPauseButton}
                            >
                                <Text style={styles.playPauseIcon}>
                                    {isPlaying ? '‚è∏' : '‚ñ∂'}
                                </Text>
                            </TouchableOpacity>
                        </View>

                        {/* Bottom Bar - only for VOD/Series */}
                        {type !== 'live' && (
                            <View style={styles.bottomBar}>
                                <Text style={styles.timeText}>{formatTime(currentTime)}</Text>
                                <View style={styles.progressBarContainer}>
                                    <View style={styles.progressBar}>
                                        <View
                                            style={[
                                                styles.progressFill,
                                                {
                                                    width: duration > 0 ? `${(currentTime / duration) * 100}%` : '0%',
                                                },
                                            ]}
                                        />
                                    </View>
                                </View>
                                <Text style={styles.timeText}>{formatTime(duration)}</Text>
                            </View>
                        )}

                        {/* Live Indicator */}
                        {type === 'live' && (
                            <View style={styles.liveIndicator}>
                                <View style={styles.liveDot} />
                                <Text style={styles.liveText}>LIVE</Text>
                            </View>
                        )}
                    </View>
                )}
            </TouchableOpacity>
        </View>
    );
};

const styles = StyleSheet.create({
    container: {
        flex: 1,
        backgroundColor: '#000000',
    },
    video: {
        position: 'absolute',
        top: 0,
        left: 0,
        bottom: 0,
        right: 0,
    },
    overlay: {
        flex: 1,
        justifyContent: 'space-between',
    },
    bufferingContainer: {
        position: 'absolute',
        top: '50%',
        left: '50%',
        transform: [{ translateX: -50 }, { translateY: -50 }],
        alignItems: 'center',
    },
    bufferingText: {
        color: '#ffffff',
        marginTop: 12,
        fontSize: 14,
    },
    errorContainer: {
        position: 'absolute',
        top: '50%',
        left: '50%',
        transform: [{ translateX: -100 }, { translateY: -50 }],
        alignItems: 'center',
        width: 200,
    },
    errorText: {
        fontSize: 48,
        marginBottom: 12,
    },
    errorMessage: {
        color: '#ffffff',
        textAlign: 'center',
        fontSize: 14,
    },
    controlsContainer: {
        flex: 1,
        backgroundColor: 'rgba(0, 0, 0, 0.4)',
    },
    topBar: {
        flexDirection: 'row',
        alignItems: 'center',
        padding: 16,
        paddingTop: 24,
    },
    backButton: {
        padding: 8,
        marginRight: 12,
    },
    backIcon: {
        color: '#ffffff',
        fontSize: 24,
    },
    title: {
        flex: 1,
        color: '#ffffff',
        fontSize: 16,
        fontWeight: '600',
    },
    spacer: {
        width: 40,
    },
    centerControls: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'center',
    },
    playPauseButton: {
        width: 64,
        height: 64,
        borderRadius: 32,
        backgroundColor: 'rgba(255, 255, 255, 0.2)',
        justifyContent: 'center',
        alignItems: 'center',
    },
    playPauseIcon: {
        color: '#ffffff',
        fontSize: 28,
    },
    bottomBar: {
        flexDirection: 'row',
        alignItems: 'center',
        padding: 16,
        paddingBottom: 24,
    },
    timeText: {
        color: '#ffffff',
        fontSize: 12,
        fontWeight: '500',
        minWidth: 45,
    },
    progressBarContainer: {
        flex: 1,
        marginHorizontal: 12,
    },
    progressBar: {
        height: 4,
        backgroundColor: 'rgba(255, 255, 255, 0.3)',
        borderRadius: 2,
    },
    progressFill: {
        height: '100%',
        backgroundColor: '#2563eb',
        borderRadius: 2,
    },
    liveIndicator: {
        flexDirection: 'row',
        alignItems: 'center',
        alignSelf: 'flex-end',
        backgroundColor: 'rgba(239, 68, 68, 0.9)',
        paddingHorizontal: 12,
        paddingVertical: 6,
        borderRadius: 4,
        margin: 16,
    },
    liveDot: {
        width: 8,
        height: 8,
        borderRadius: 4,
        backgroundColor: '#ffffff',
        marginRight: 6,
    },
    liveText: {
        color: '#ffffff',
        fontSize: 12,
        fontWeight: '700',
    },
});

export default PlayerScreen;
</file>

<file path="src/screens/SeriesScreen.jsx">
// src/screens/SeriesScreen.js
import React, { useState, useEffect } from 'react';
import {
    View,
    Text,
    FlatList,
    TouchableOpacity,
    StyleSheet,
    ActivityIndicator,
    Image,
    Alert,
    RefreshControl,
    Dimensions,
} from 'react-native';
import { createAPIInstance } from '../api/xtreamAPI';

const { width } = Dimensions.get('window');
const ITEM_WIDTH = (width - 48) / 3; // 3 columns with padding

const SeriesScreen = ({ navigation }) => {
    const [series, setSeries] = useState([]);
    const [categories, setCategories] = useState([]);
    const [selectedCategory, setSelectedCategory] = useState(null);
    const [isLoading, setIsLoading] = useState(true);
    const [isRefreshing, setIsRefreshing] = useState(false);

    useEffect(() => {
        loadSeries();
    }, [selectedCategory]);

    const loadSeries = async () => {
        try {
            setIsLoading(true);
            const api = await createAPIInstance();

            // Load categories if not already loaded
            if (categories.length === 0) {
                const cats = await api.getSeriesCategories();
                setCategories([{ category_id: null, category_name: 'All Series' }, ...cats]);
            }

            // Load series
            const seriesData = await api.getSeries(selectedCategory);
            setSeries(seriesData);
            setIsLoading(false);
        } catch (error) {
            setIsLoading(false);
            Alert.alert('Error', 'Failed to load series. Please try again.');
            console.error('Error loading series:', error);
        }
    };

    const handleRefresh = async () => {
        setIsRefreshing(true);
        await loadSeries();
        setIsRefreshing(false);
    };

    const handleSeriesPress = async (seriesItem) => {
        try {
            const api = await createAPIInstance();
            const seriesInfo = await api.getSeriesInfo(seriesItem.series_id);

            // Navigate to series detail screen (you'll need to create this)
            // For now, we'll just play the first episode of the first season
            const seasons = Object.keys(seriesInfo.episodes);
            if (seasons.length > 0) {
                const firstSeason = seasons[0];
                const episodes = seriesInfo.episodes[firstSeason];
                if (episodes.length > 0) {
                    const firstEpisode = episodes[0];
                    const streamUrl = api.getSeriesStreamUrl(
                        firstEpisode.id,
                        firstEpisode.container_extension || 'mp4'
                    );

                    navigation.navigate('Player', {
                        streamUrl: streamUrl,
                        title: `${seriesItem.name} - S${firstSeason}E${firstEpisode.episode_num}`,
                        type: 'series',
                    });
                }
            }
        } catch (error) {
            Alert.alert('Error', 'Failed to load series details');
            console.error('Error loading series details:', error);
        }
    };

    const renderSeries = ({ item }) => (
        <TouchableOpacity
            style={styles.seriesItem}
            onPress={() => handleSeriesPress(item)}
            activeOpacity={0.7}
        >
            <View style={styles.posterContainer}>
                {item.cover ? (
                    <Image
                        source={{ uri: item.cover }}
                        style={styles.poster}
                        resizeMode="cover"
                    />
                ) : (
                    <View style={[styles.poster, styles.placeholderPoster]}>
                        <Text style={styles.placeholderText}>üì∫</Text>
                    </View>
                )}
                <View style={styles.playOverlay}>
                    <View style={styles.playButton}>
                        <Text style={styles.playIcon}>‚ñ∂</Text>
                    </View>
                </View>
            </View>
            <Text style={styles.seriesTitle} numberOfLines={2}>
                {item.name}
            </Text>
            {item.rating && (
                <Text style={styles.seriesRating}>‚≠ê {item.rating}</Text>
            )}
            {item.last_modified && (
                <Text style={styles.seriesYear}>
                    {new Date(parseInt(item.last_modified) * 1000).getFullYear()}
                </Text>
            )}
        </TouchableOpacity>
    );

    const renderCategory = ({ item }) => (
        <TouchableOpacity
            style={[
                styles.categoryChip,
                selectedCategory === item.category_id && styles.categoryChipActive,
            ]}
            onPress={() => setSelectedCategory(item.category_id)}
        >
            <Text
                style={[
                    styles.categoryText,
                    selectedCategory === item.category_id && styles.categoryTextActive,
                ]}
            >
                {item.category_name}
            </Text>
        </TouchableOpacity>
    );

    if (isLoading && series.length === 0) {
        return (
            <View style={styles.loadingContainer}>
                <ActivityIndicator size="large" color="#2563eb" />
                <Text style={styles.loadingText}>Loading series...</Text>
            </View>
        );
    }

    return (
        <View style={styles.container}>
            {/* Categories */}
            {categories.length > 0 && (
                <View style={styles.categoriesContainer}>
                    <FlatList
                        horizontal
                        data={categories}
                        renderItem={renderCategory}
                        keyExtractor={(item) => item.category_id?.toString() || 'all'}
                        showsHorizontalScrollIndicator={false}
                        contentContainerStyle={styles.categoriesList}
                    />
                </View>
            )}

            {/* Series Grid */}
            <FlatList
                data={series}
                renderItem={renderSeries}
                keyExtractor={(item) => item.series_id.toString()}
                numColumns={3}
                contentContainerStyle={styles.seriesList}
                columnWrapperStyle={styles.row}
                refreshControl={
                    <RefreshControl
                        refreshing={isRefreshing}
                        onRefresh={handleRefresh}
                        tintColor="#2563eb"
                    />
                }
                ListEmptyComponent={
                    <View style={styles.emptyContainer}>
                        <Text style={styles.emptyText}>No series available</Text>
                    </View>
                }
            />
        </View>
    );
};

const styles = StyleSheet.create({
    container: {
        flex: 1,
        backgroundColor: '#09090b',
    },
    loadingContainer: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'center',
        backgroundColor: '#09090b',
    },
    loadingText: {
        color: '#71717a',
        marginTop: 12,
        fontSize: 14,
    },
    categoriesContainer: {
        borderBottomWidth: 1,
        borderBottomColor: '#27272a',
        backgroundColor: '#09090b',
    },
    categoriesList: {
        paddingHorizontal: 12,
        paddingVertical: 12,
    },
    categoryChip: {
        paddingHorizontal: 16,
        paddingVertical: 8,
        borderRadius: 20,
        backgroundColor: '#18181b',
        borderWidth: 1,
        borderColor: '#27272a',
        marginRight: 8,
    },
    categoryChipActive: {
        backgroundColor: '#2563eb',
        borderColor: '#2563eb',
    },
    categoryText: {
        color: '#a1a1aa',
        fontSize: 14,
        fontWeight: '500',
    },
    categoryTextActive: {
        color: '#ffffff',
    },
    seriesList: {
        padding: 8,
    },
    row: {
        justifyContent: 'space-between',
    },
    seriesItem: {
        width: ITEM_WIDTH,
        marginBottom: 16,
        marginHorizontal: 4,
    },
    posterContainer: {
        position: 'relative',
        aspectRatio: 2 / 3,
        borderRadius: 8,
        overflow: 'hidden',
        marginBottom: 8,
    },
    poster: {
        width: '100%',
        height: '100%',
        backgroundColor: '#27272a',
    },
    placeholderPoster: {
        justifyContent: 'center',
        alignItems: 'center',
    },
    placeholderText: {
        fontSize: 32,
    },
    playOverlay: {
        position: 'absolute',
        top: 0,
        left: 0,
        right: 0,
        bottom: 0,
        backgroundColor: 'rgba(0, 0, 0, 0.4)',
        justifyContent: 'center',
        alignItems: 'center',
        opacity: 0,
    },
    playButton: {
        width: 44,
        height: 44,
        borderRadius: 22,
        backgroundColor: '#2563eb',
        justifyContent: 'center',
        alignItems: 'center',
    },
    playIcon: {
        color: '#ffffff',
        fontSize: 16,
        marginLeft: 2,
    },
    seriesTitle: {
        fontSize: 13,
        fontWeight: '500',
        color: '#ffffff',
        marginBottom: 4,
        lineHeight: 16,
    },
    seriesRating: {
        fontSize: 12,
        color: '#71717a',
        marginBottom: 2,
    },
    seriesYear: {
        fontSize: 11,
        color: '#52525b',
    },
    emptyContainer: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'center',
        paddingVertical: 48,
        width: '100%',
    },
    emptyText: {
        color: '#71717a',
        fontSize: 16,
    },
});

export default SeriesScreen;
</file>

<file path="src/screens/SplashScreen.jsx">
// src/screens/SplashScreen.js
import React, { useEffect } from 'react';
import { View, Text, StyleSheet, ActivityIndicator } from 'react-native';

const SplashScreen = ({ navigation }) => {
    useEffect(() => {
        // Simulate loading time, then navigate to Login
        const timer = setTimeout(() => {
            navigation.replace('Login');
        }, 2000);

        return () => clearTimeout(timer);
    }, [navigation]);

    return (
        <View style={styles.container}>
            <View style={styles.content}>
                <Text style={styles.icon}>üì∫</Text>
                <Text style={styles.title}>IPTV Player</Text>
                <Text style={styles.subtitle}>Your Entertainment Hub</Text>
            </View>

            <View style={styles.footer}>
                <ActivityIndicator size="small" color="#2563eb" />
                <Text style={styles.loadingText}>Loading...</Text>
            </View>
        </View>
    );
};

const styles = StyleSheet.create({
    container: {
        flex: 1,
        backgroundColor: '#09090b',
        justifyContent: 'space-between',
        alignItems: 'center',
        paddingVertical: 60,
    },
    content: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'center',
    },
    icon: {
        fontSize: 80,
        marginBottom: 20,
    },
    title: {
        fontSize: 32,
        fontWeight: 'bold',
        color: '#ffffff',
        marginBottom: 8,
    },
    subtitle: {
        fontSize: 16,
        color: '#71717a',
    },
    footer: {
        alignItems: 'center',
    },
    loadingText: {
        fontSize: 14,
        color: '#71717a',
        marginTop: 12,
    },
});

export default SplashScreen;
</file>

<file path="app.json">
{
  "expo": {
    "name": "IPTVPlayer",
    "slug": "IPTVPlayer",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/images/icon.png",
    "scheme": "iptvplayer",
    "userInterfaceStyle": "automatic",
    "newArchEnabled": true,
    "ios": {
      "supportsTablet": true
    },
    "android": {
      "adaptiveIcon": {
        "backgroundColor": "#E6F4FE",
        "foregroundImage": "./assets/images/android-icon-foreground.png",
        "backgroundImage": "./assets/images/android-icon-background.png",
        "monochromeImage": "./assets/images/android-icon-monochrome.png"
      },
      "edgeToEdgeEnabled": true,
      "predictiveBackGestureEnabled": false,
      "package": "com.anonymous.IPTVPlayer"
    },
    "web": {
      "output": "static",
      "favicon": "./assets/images/favicon.png"
    },
    "plugins": [
      "expo-router",
      [
        "expo-splash-screen",
        {
          "image": "./assets/images/splash-icon.png",
          "imageWidth": 200,
          "resizeMode": "contain",
          "backgroundColor": "#ffffff",
          "dark": {
            "backgroundColor": "#000000"
          }
        }
      ]
    ],
    "experiments": {
      "typedRoutes": false
    }
  }
}
</file>

<file path="package.json">
{
  "name": "iptvplayer",
  "main": "index.js",
  "version": "1.0.0",
  "scripts": {
    "start": "expo start",
    "reset-project": "node ./scripts/reset-project.js",
    "android": "expo run:android",
    "ios": "expo run:ios",
    "web": "expo start --web",
    "lint": "expo lint"
  },
  "dependencies": {
    "@expo/vector-icons": "^15.0.3",
    "@react-native-async-storage/async-storage": "^2.2.0",
    "@react-navigation/bottom-tabs": "^7.4.0",
    "@react-navigation/elements": "^2.6.3",
    "@react-navigation/native": "^7.1.26",
    "@react-navigation/stack": "^7.6.13",
    "axios": "^1.13.2",
    "expo": "~54.0.30",
    "expo-constants": "~18.0.12",
    "expo-font": "~14.0.10",
    "expo-haptics": "~15.0.8",
    "expo-image": "~3.0.11",
    "expo-linking": "~8.0.11",
    "expo-router": "~6.0.21",
    "expo-splash-screen": "~31.0.13",
    "expo-status-bar": "~3.0.9",
    "expo-symbols": "~1.0.8",
    "expo-system-ui": "~6.0.9",
    "expo-web-browser": "~15.0.10",
    "react": "19.1.0",
    "react-dom": "19.1.0",
    "react-native": "0.81.5",
    "react-native-gesture-handler": "~2.28.0",
    "react-native-orientation-locker": "^1.7.0",
    "react-native-reanimated": "~4.1.1",
    "react-native-safe-area-context": "~5.6.0",
    "react-native-screens": "~4.16.0",
    "react-native-video": "^6.18.0",
    "react-native-web": "~0.21.0",
    "react-native-worklets": "0.5.1",
    "repomix": "^1.10.2"
  },
  "devDependencies": {
    "eslint": "^9.25.0",
    "eslint-config-expo": "~10.0.0"
  },
  "private": true
}
</file>

</files>
